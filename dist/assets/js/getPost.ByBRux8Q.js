import{g as h,i as E,a as f,o as y}from"./index-a7d5cfcc.rqyF9t_j.js";import{g as b,q as L,c as v,o as I,a as A}from"./index.esm2017.FicD-Q5F.js";const w={apiKey:"AIzaSyALbJJCcRibFqa7HVcadIYAgBBzbTREkiY",authDomain:"hustlersathome-b9bee.firebaseapp.com",databaseURL:"https://hustlersathome-b9bee-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"hustlersathome-b9bee",storageBucket:"hustlersathome-b9bee.appspot.com",messagingSenderId:"447459076084",appId:"1:447459076084:web:f26efa8cd4e33523a63ba1",measurementId:"G-5S6WET94BS"};let r;h().length?r=h()[0]:r=E(w);const B=b(r);f(r);let c=[];async function P(){const e=document.getElementById("posts-container");for(;e.firstChild;)e.removeChild(e.firstChild);c=[];try{const o=L(v(B,"posts"),I("timestamp","desc"));if((await A(o)).forEach(t=>{const a=t.data();a.id=t.id,c.push(a),u(a,e)}),c.length===0){const t=document.createElement("p");t.textContent="No posts available.",e.appendChild(t)}}catch(o){console.error("Error retrieving posts:",o);const n=document.createElement("p");n.textContent="Failed to load posts. Please try again later.",e.appendChild(n)}}function u(e,o){if(!e.itemName||!e.imageUrl||!e.account){console.warn("Incomplete post data:",e);return}const n=document.createElement("div");n.classList.add("post-item"),n.setAttribute("data-category",e.category||"Uncategorized");const t=document.createElement("h3");t.textContent=e.itemName;const a=document.createElement("p");a.textContent="Posted by: ";const s=document.createElement("a");s.textContent=e.account,s.classList.add("account-link");const C=f(r);y(C,p=>{if(p){const g=p.displayName;e.account===g?s.href="/mymarketplace.html":s.href=`usermarketplace.html?account=${encodeURIComponent(e.account)}`}else s.href=`usermarketplace.html?account=${encodeURIComponent(e.account)}`}),a.appendChild(s);const l=document.createElement("button");l.textContent="More Details",l.classList.add("more-details"),l.addEventListener("click",()=>{window.location.href=`postDetails.html?id=${e.id}`});const m=document.createElement("div");m.classList.add("image-container");const d=document.createElement("img");d.src=e.imageUrl,d.alt=e.itemName,d.classList.add("post-image"),m.appendChild(d);const i=document.createElement("div");i.classList.add("content-container"),i.appendChild(t),i.appendChild(a),i.appendChild(l),n.appendChild(m),n.appendChild(i),o.appendChild(n)}function x(e){const o=document.getElementById("posts-container"),n=e==="All"?c:c.filter(t=>t.category===e);for(;o.firstChild;)o.removeChild(o.firstChild);if(n.forEach(t=>u(t,o)),n.length===0){const t=document.createElement("p");t.textContent=`No posts found in the "${e}" category.`,o.appendChild(t)}}function S(e){const o=document.getElementById("posts-container"),n=c.filter(s=>s.itemName.toLowerCase().includes(e.toLowerCase())||s.account.toLowerCase().includes(e.toLowerCase())),t=document.querySelector(".active-filter")?document.querySelector(".active-filter").textContent:"All",a=t==="All"?n:n.filter(s=>s.category===t);for(;o.firstChild;)o.removeChild(o.firstChild);if(a.forEach(s=>u(s,o)),a.length===0){const s=document.createElement("p");s.textContent="No posts found for your search.",o.appendChild(s)}}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".filter-btn");e.forEach(n=>{n.addEventListener("click",()=>{const t=n.textContent;x(t),e.forEach(a=>a.classList.remove("active")),n.classList.add("active")})}),document.getElementById("search-input").addEventListener("input",n=>{const t=n.target.value;S(t)}),P()});
