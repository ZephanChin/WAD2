import{i as b,a as w,c as y,u as E,b as v,o as I,s as B}from"./index-a7d5cfcc.rqyF9t_j.js";import{g as L,d as l,c,s as m}from"./index.esm2017.FicD-Q5F.js";const A={apiKey:"AIzaSyALbJJCcRibFqa7HVcadIYAgBBzbTREkiY",authDomain:"hustlersathome-b9bee.firebaseapp.com",databaseURL:"https://hustlersathome-b9bee-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"hustlersathome-b9bee",storageBucket:"hustlersathome-b9bee.appspot.com",messagingSenderId:"447459076084",appId:"1:447459076084:web:f26efa8cd4e33523a63ba1",measurementId:"G-5S6WET94BS"},f=b(A),n=w(f),u=L(f);function g(s){s.preventDefault(),B(n).then(()=>{window.location.href="login.html"}).catch(i=>{})}document.addEventListener("DOMContentLoaded",()=>{const s=document.getElementById("signup-form");s&&s.addEventListener("submit",async t=>{t.preventDefault();const a=document.getElementById("displayName").value,e=document.getElementById("email").value,o=document.getElementById("password").value,h=document.getElementById("confirmPassword").value;if(o!==h){alert("Passwords do not match. Please try again.");return}try{const d=(await y(n,e,o)).user;await E(d,{displayName:a}),await p(d),alert("Sign-up successful! Welcome, "+a),window.location.href="/index.html"}catch(r){alert(`Error: ${r.message}`)}});const i=document.getElementById("login-form");i&&i.addEventListener("submit",t=>{t.preventDefault();const a=document.getElementById("email").value,e=document.getElementById("password").value;v(n,a,e).then(o=>{o.user,alert("Login successful!"),window.location.href="/index.html"}).catch(o=>{alert(`Error: ${o.message}`)})});async function p(t){try{const a=l(c(u,"users_chat"),t.uid);await m(a,{uid:t.uid,displayName:t.displayName,email:t.email});const e=l(c(u,"report"),t.uid);await m(e,{bad:0,good:0,items_sold:0,reviews:0,sales:0,total_stars:0})}catch{}}I(n,t=>{const a=document.getElementById("welcome-message"),e=document.getElementById("login-logout-btn");t?(a&&(a.textContent=`Welcome back, ${t.displayName||t.email}!`),e&&(e.textContent="Logout",e.removeAttribute("href"),e.addEventListener("click",g))):(a&&(a.textContent="Welcome, Guest!"),e&&(e.textContent="Login",e.setAttribute("href","/login.html"),e.removeEventListener("click",g)))})});
