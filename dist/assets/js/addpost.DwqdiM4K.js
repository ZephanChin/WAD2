import{g as l,i as E,a as B}from"./index-a7d5cfcc.rqyF9t_j.js";import{g as v,r as D,b as S,a as w}from"./index.esm2017.BPQr0z8j.js";import{g as C,j as N,c as x}from"./index.esm2017.FicD-Q5F.js";const R={apiKey:"AIzaSyALbJJCcRibFqa7HVcadIYAgBBzbTREkiY",authDomain:"hustlersathome-b9bee.firebaseapp.com",databaseURL:"https://hustlersathome-b9bee-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"hustlersathome-b9bee",storageBucket:"hustlersathome-b9bee.appspot.com",messagingSenderId:"447459076084",appId:"1:447459076084:web:f26efa8cd4e33523a63ba1",measurementId:"G-5S6WET94BS"};let a;l().length?a=l()[0]:a=E(R);const p=B(a),U=v(a),A=C(a),u=document.getElementById("post-form"),F=document.getElementById("itemName"),L=document.getElementById("postDescription"),k=document.getElementById("category"),d=document.getElementById("price"),P=document.getElementById("mrtStation"),z=document.getElementById("itemImage"),t=document.getElementById("status");u.addEventListener("submit",async g=>{g.preventDefault();const n=F.value,r=L.value,i=k.value,f=d.value,c=P.value,s=z.files[0];let e=parseFloat(f);if(isNaN(e)||e<=0){t.textContent="Please enter a valid positive price.";return}if(e=Math.round(e*100)/100,d.value=e.toFixed(2),n&&r&&i&&e&&c&&s){t.textContent="Uploading post...";const b=p.currentUser.displayName,I=p.currentUser.uid,h=D(U,`posts/${s.name}`),m=S(h,s);m.on("state_changed",o=>{},o=>{console.error("Error uploading image:",o),t.textContent="Error uploading image."},async()=>{const o=await w(m.snapshot.ref);try{await N(x(A,"posts"),{itemName:n,postDescription:r,category:i,price:e,mrtStationName:c,imageUrl:o,account:b,uid:I,timestamp:new Date}),t.textContent="Post created successfully!",u.reset(),window.location.href="marketplace.html"}catch(y){console.error("Error saving post:",y),t.textContent="Error creating post."}})}else t.textContent="Please fill in all fields."});
